<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>Function Collections</title>
		<style type="text/css" media="screen">
			#results li.pass { color: green; }
			#results li.fail { color: red; }
		</style>
	</head>
	<body>
		<ul id="results"></ul>
		<script type="text/javascript" src="assert.js"></script>
		<script>

			var store = {
				nextId: 1,

				cache: {},

				add: function(fn) {
					if (!fn.id) {
						fn.id = store.nextId++;
						return !!(store.cache[fn.id] = fn);
					}
				}
			};

			function ninja() {}

			assert(store.add(ninja), "Function was safely added.");
			assert(!store.add(ninja), "But it was only added once.");

		</script>
	</body>
</html>
